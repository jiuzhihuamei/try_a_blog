<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>舍尔曼博客</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/myblog.css">
    <link rel="stylesheet" href="css/Normallize.css">



</head>
<body>
<header>
    <div class="logo_area"><img src="images/logo2.png" height="170px"></div>
    <nav>
        <ul>
            <li><a href="index.html">首页</a></li>
            <li><a href="#">关于我</a></li>
            <li><a href="#">个人日志</a></li>
            <li><a href="#">我的相册</a></li>
            <li><a href="messages.html">留言板</a></li>
            <li><a id="login_status" href=""></a></li>
        </ul>
    </nav>
</header>
<aside id="box_left">
    <div id="about" class="left_box"><h4 class="">关于我</h4>
        <p>90后，狮子座，大美女</p></div>
    <div id="gallery" class="left_box"><h4 class="">我的相册</h4>
    </div>
    <div id="sort" class="left_box"><h4 class="">文章分类</h4>
        <ul id="sortList">
            <li><a>--日记--</a></li>
            <li><a>--美图--</a></li>
            <li><a>--学习笔记--</a></li>
        </ul>
    </div>
    <div id="recommend" class="left_box"><h4 class="">站长推荐</h4>
    </div>
    <div id="attention" class="left_box"><h4 class="">关注我</h4>
        <img id="QR_code" src="images/QR_code.jpg"></div>
</aside>
<div id="box_right">
    <ul id="contentList">
    </ul>
</div>
<script src="js/common.js"></script>
<script src="js/HttpUtil.js"></script>
<script>
    // 检查登录
    checkLogin();

    var login_status = document.getElementById("login_status");
    if (login_status.innerText==="登录"){
        document.getElementById("login_status").onclick = function (ev) {
            postJSON(config.apiURL + "/wns/user/login",
                function () {
                    login_status.href = "index.html";
                }, function () {
                    alert("登录失败！")
                });
        };
    }
    else{
        document.getElementById("login_status").onclick = function (ev) {
            postJSON(config.apiURL + "/wns/user/signOut",
                function () {
                    window.open("index.html");
                }, function () {
                    alert("注销失败！")
                });
        };
    }


    // 获取文章详情
    getJSON(config.apiURL + "/article/list", function (resp) {
        for (i = 0; i < resp.data.length; i++) {
            var ul = document.getElementById("contentList");
            var a = document.createElement("a");
            var title = document.createTextNode(resp.data[i].title);
            var li = document.createElement("li");
            var passage = document.createElement("p");
            var content = document.createTextNode(resp.data[i].content);
            ul.appendChild(li);
            a.appendChild(title);
            li.appendChild(a);
            li.appendChild(passage);
            passage.appendChild(content);
        }
    }, function () {
            alert("获取文章失败");
    });
</script>
</body>
</html>